extends layout
block content
    .row
        .col-md-5
            h1= title
        .col-md-3
        .col-md-4
            span Updated:
            a.btn.btn-default(onclick='updateWalmart()') #{lastUpdate.toLocaleString("en-US")}
    table.table.table-hover
        thead
            th Order ID:
            th Order Date:
            th URL:
            th Address:
            th Total:
        tbody
            each order in orders
                tr
                    td #{order.id}
                    td #{order.date?order.date.toLocaleDateString("en-US"):''}
                    td #{order.url}
                    td #{order.address}
                    td #{order.total}
    .modal
    script.
        var socket = io();
        var $body = $("body");
        socket.on('updateOver', function () {
            $body.removeClass("loading");
            console.log('Data is updated!');
        });
        var updateWalmart = function () {
            $body.addClass("loading");
            socket.emit('updateWalmart');
        }